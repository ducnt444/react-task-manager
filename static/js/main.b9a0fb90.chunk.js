(this["webpackJsonpreact-task-manager"]=this["webpackJsonpreact-task-manager"]||[]).push([[0],{131:function(e,t,a){},132:function(e,t,a){},196:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(13),i=a.n(c),r=a(11),o=(a(131),a(17)),l=(a(132),a(42)),d=a(103),j=a(102),u=a(101),b=a(12),O="TOGGLE_LOADING",h="GET_TASK_LIST",m=a(15),f=function(e){return{type:O,payload:{status:e}}},p=Object(m.a)("UPDATE_CURRENT",(function(e){return{payload:{userInput:e}}})),x=Object(m.a)("DISPLAY_NAV",(function(e){return{payload:e}})),k=Object(m.a)("LOGOUT"),g=Object(m.a)("MODAL_CONTENT",(function(e,t){return{payload:{id:e,content:t}}})),N=Object(m.a)("MODAL_VISIBLE",(function(e){return{payload:{isVisible:e}}})),v=Object(m.a)("MODAL_LOADING",(function(e){return{payload:{isLoading:e}}})),y=Object(m.a)("ADD_TASK",(function(e){return{payload:{newTask:e}}})),S=Object(m.a)("EDIT_TASK",(function(e,t){return{payload:{id:e,editedTask:t}}})),C=Object(m.a)("COMPLETE_TASK",(function(e){return{payload:{completeTask:e}}})),D=Object(m.a)("DELETE _TASK",(function(e){return{payload:e}})),T=Object(m.a)("GET _TASKS",(function(e){return{payload:e}})),L=a(35),A=a.n(L),w="https://rest-api-v2.herokuapp.com",E=function(e,t,a){return A.a.patch(w+"/users/"+e,{tasks:t},a)},I=a(2),U=function(e){var t=e.task,a=e.toastSuccess,n=e.toastWarning,s=Object(b.f)(),c=Object(r.b)(),i=Object(r.c)((function(e){return e.appState.currentUser})),O=new Intl.DateTimeFormat([],{timeZone:"Asia/Ho_Chi_Minh",year:"numeric",month:"2-digit",day:"2-digit"}),h=t.taskDate,m=O.format(new Date(h));return Object(I.jsxs)("div",{className:"taskItem",children:[Object(I.jsxs)("div",{className:"taskContent",children:[Object(I.jsx)("h3",{className:"taskName",children:t.taskName}),Object(I.jsx)("h4",{className:"taskDate",children:m})]}),Object(I.jsx)("button",{className:"doneBtn",onClick:function(){return c((function(e){e(f(!0));var s=Object(o.a)(Object(o.a)({},t),{},{isDone:!t.isDone}),c=i.tasks.map((function(e){return e.id==t.id?s:e})),r={Authorization:"Bearer ".concat(i.token)};E(i.id,c,{headers:r}).then((function(){e(S(t.id,s)),e(f(!1)),t.isDone?n("Task is incomplete"):a("Task is completed")}))}))},children:t.isDone?Object(I.jsx)(u.a,{}):Object(I.jsx)(j.a,{})}),Object(I.jsx)("button",{className:"editBtn",onClick:function(){return s.push("/edit-task/".concat(t.id))},children:Object(I.jsx)(l.a,{})}),Object(I.jsx)("button",{className:"deleteBtn",onClick:function(){c(g(t.id,"Do you want to delete this task")),c(N(!0))},children:Object(I.jsx)(d.a,{})})]})},F=function(e){var t=e.toastSuccess,a=e.toastWarning,n=Object(r.c)((function(e){return e.appState.currentUser.tasks})),s=n.filter((function(e){return!0===e.isDone})),c=n.filter((function(e){return!1===e.isDone}));return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("header",{className:"container1140",children:[Object(I.jsx)("h1",{children:"Task Manager with React"}),Object(I.jsx)("div",{className:"header-content",children:Object(I.jsxs)("div",{className:"statistics-area",children:[Object(I.jsxs)("div",{className:"statistics",onClick:function(){return document.getElementById("doneTasks").scrollIntoView({behavior:"smooth"})},children:[Object(I.jsx)("div",{className:"header-item",children:s.length}),Object(I.jsx)("span",{className:"statistics-text",children:"Completed"})]}),Object(I.jsxs)("div",{className:"statistics",onClick:function(){return document.getElementById("todoTasks").scrollIntoView({behavior:"smooth"})},children:[Object(I.jsx)("div",{className:"header-item",children:c.length}),Object(I.jsx)("span",{className:"statistics-text",children:"Ongoing"})]})]})})]}),Object(I.jsx)("main",{children:Object(I.jsxs)("div",{className:"home container1140",children:[Object(I.jsxs)("div",{id:"todoTasks",children:[Object(I.jsx)("h2",{children:"Ongoing tasks: "}),c.length>0?c.map((function(e){return Object(I.jsx)(U,{task:e,toastSuccess:t,toastWarning:a},e.id)})):Object(I.jsx)("span",{className:"noTasks",children:"No tasks yet"})]}),Object(I.jsxs)("div",{id:"doneTasks",children:[Object(I.jsx)("h2",{children:"Completed tasks: "}),s.length>0?s.map((function(e){return Object(I.jsx)(U,{task:e,toastSuccess:t,toastWarning:a},e.id)})):Object(I.jsx)("span",{className:"noTasks",children:"No tasks yet"})]})]})})]})},_=a(206),B=function(e){var t=e.currentUser,a=e.toastSuccess,n=Object(r.b)(),s=Object(r.c)((function(e){return e.modalState.modalId})),c=Object(r.c)((function(e){return e.modalState.modalContent})),i=Object(r.c)((function(e){return e.modalState.isLoading})),o=Object(r.c)((function(e){return e.modalState.isVisible}));return Object(I.jsx)(_.a,{visible:o,confirmLoading:i,onOk:function(){n((function(e){e(v(!0));var n=t.tasks.filter((function(e){return e.id!==s})),c={Authorization:"Bearer ".concat(t.token)};E(t.id,n||[],{headers:c}).then((function(t){e(D(t.data.tasks)),e(v(!1)),e(N(!1)),a("Task is deleted successfully")}))}))},onCancel:function(){n(N(!1))},children:Object(I.jsx)("p",{className:"modalContent",children:c})})},M=a(119),P=a(31),V=a(23),R=a(64),z=a.n(R),G=(a(99),a(155)),K=a(207),W=function(e){var t=e.toastSuccess,a=e.toastError,s=Object(n.useState)(""),c=Object(P.a)(s,2),i=c[0],l=c[1],d=Object(n.useState)(null),j=Object(P.a)(d,2),u=j[0],b=j[1],O=Object(r.b)(),h=Object(r.c)((function(e){return e.appState.currentUser}));return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("header",{className:"container1140",children:[Object(I.jsx)("h1",{children:"Add task"}),Object(I.jsx)("div",{className:"header-content",children:Object(I.jsx)("button",{className:"header-item header-btn",children:Object(I.jsx)(V.b,{to:"/",children:Object(I.jsx)("span",{children:"Back"})})})})]}),Object(I.jsx)("main",{children:Object(I.jsxs)("div",{className:"container1140",children:[Object(I.jsxs)("div",{className:"form-item",children:[Object(I.jsx)("label",{htmlFor:"taskName",children:"Add task:"}),Object(I.jsx)("input",{type:"text",id:"taskName",value:i,onChange:function(e){l(e.target.value)}})]}),Object(I.jsxs)("div",{className:"form-item",children:[Object(I.jsx)("label",{htmlFor:"taskDate",children:"Task date:"}),Object(I.jsx)(z.a,{dateFormat:"dd/MM/yyyy",selected:u,onChange:function(e){b(e)},minDate:Object(G.default)(new Date,0)})]}),Object(I.jsx)("button",{onClick:function(){""!==i&&null!==u?O((function(e){e(f(!0));var a={id:Object(K.a)(),taskName:i,taskDate:u,isDone:!1},n=[].concat(Object(M.a)(h.tasks),[a]),s={Authorization:"Bearer ".concat(h.token)};E(h.id,n,{headers:s}).then((function(){e(y(Object(o.a)(Object(o.a)({},a),{},{taskDate:new Date(u).toISOString()}))),e(f(!1)),l(""),b(null),t("Task added successfully"),console.log(h)}))})):a("Please fill in both fields")},className:"confirm-btn blue-text-btn btn",children:"Confirm"})]})})]})},H=a.p+"static/media/react-logo-min.90175bd1.png",J=function(e){var t=e.isLoading;return Object(I.jsx)("div",{className:"loading ".concat(t?"show":""),children:Object(I.jsx)("img",{src:H,alt:"loading"})})},Y=a(192),q=function(e){var t=e.currentUser,a=e.toastSuccess,s=e.toastError,c=Object(r.b)(),i=Object(b.g)().id,o=Object(n.useState)(""),l=Object(P.a)(o,2),d=l[0],j=l[1],u=Object(n.useState)(null),O=Object(P.a)(u,2),h=O[0],m=O[1],p=Object(n.useState)(!1),x=Object(P.a)(p,2),k=x[0],g=x[1];Object(n.useEffect)((function(){var e=t.tasks.find((function(e){return e.id===i}));e&&(j(e.taskName),m(Object(Y.default)(e.taskDate)),g(e.isDone))}),[t]);return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("header",{className:"container1140",children:[Object(I.jsx)("h1",{children:"Edit task"}),Object(I.jsx)("div",{className:"header-content",children:Object(I.jsx)("button",{className:"header-item header-btn",children:Object(I.jsx)(V.b,{to:"/",children:Object(I.jsx)("span",{children:"Back"})})})})]}),Object(I.jsx)("main",{children:Object(I.jsxs)("div",{className:"container1140",children:[Object(I.jsxs)("div",{className:"form-item",children:[Object(I.jsx)("label",{htmlFor:"taskName",children:"Edit task:"}),Object(I.jsx)("input",{type:"text",id:"taskName",value:d,onChange:function(e){j(e.target.value)}})]}),Object(I.jsxs)("div",{className:"form-item",children:[Object(I.jsx)("label",{htmlFor:"taskDate",children:"Task date:"}),Object(I.jsx)(z.a,{dateFormat:"dd/MM/yyyy",selected:h,onChange:function(e){m(e)},minDate:Object(G.default)(new Date,0)})]}),Object(I.jsx)("button",{onClick:function(){""!==d&&null!==h?c((function(e){e(f(!0));var n={id:i,taskName:d,taskDate:new Date(h).toISOString(),isDone:k},s=t.tasks.map((function(e){return e.id==i?n:e}));console.log(s);var c={Authorization:"Bearer ".concat(t.token)};E(t.id,s,{headers:c}).then((function(){e(S(i,n)),e(f(!1)),a("Task edited successfully")}))})):s("Please fill in both fields")},className:"confirm-btn blue-text-btn btn",children:"Confirm"})]})})]})},Z=a(48),Q=(a(194),function(e){return A.a.put(w+"/currentUser",e)}),X=function(e){var t=e.toastSuccess,a=e.toastError,s=Object(b.f)(),c=Object(r.b)(),i=Object(r.c)((function(e){return e.appState.apiUrl})),o=Object(n.useState)("Login"),l=Object(P.a)(o,2),d=l[0],j=l[1],u=Object(n.useState)(""),O=Object(P.a)(u,2),h=O[0],m=O[1],x=Object(n.useState)(""),k=Object(P.a)(x,2),g=k[0],N=k[1],v=Object(n.useState)(!1),y=Object(P.a)(v,2),S=y[0],C=y[1],D=function(e){c(f(!0));var n={username:h,password:g};return function(r){return function(e,t,a){return A.a.post(e+t,a)}(i,e,n).then((function(e){r(p(e.data)),Q({id:e.data.id,token:e.data.token}),C(!0),t("Welcome, ".concat(e.data.username,". Redirecting..."),{onClose:function(){return s.push("/")}})})).catch((function(e){a(e.response.data.message)})).finally((function(){c(f(!1))}))}},T=function(e){S?console.log("blocked"):c(D(e))};return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("header",{className:"container1140",children:[Object(I.jsx)("h1",{children:"Task Manager by React"}),Object(I.jsx)("h2",{children:"Login"===d?"Log in":"Sign up"})]}),Object(I.jsx)("main",{className:"login-page-wrapper",children:Object(I.jsxs)("div",{className:"login-page container1140",children:[Object(I.jsxs)("div",{className:"form-item",children:[Object(I.jsx)("label",{htmlFor:"username",children:"Username:"}),Object(I.jsx)("input",{type:"text",id:"username",placeholder:"demo: user",onChange:function(e){m(e.target.value)}})]}),Object(I.jsxs)("div",{className:"form-item",children:[Object(I.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(I.jsx)("input",{type:"text",id:"password",placeholder:"demo: 123",onChange:function(e){N(e.target.value)}})]}),Object(I.jsx)("button",{onClick:function(){T("Login"===d?"/login":"/register")},className:"confirm-btn blue-text-btn btn",children:"Login"===d?"Log in":"Sign up"}),Object(I.jsxs)("p",{className:"sign-up-text",children:["Login"===d?"Don't have an account yet?":"Have an account?",Object(I.jsx)("span",{className:"sign-up",onClick:function(){j("Login"===d?"Signup":"Login")},children:"Login"===d?" Sign up here!":" Log in now!"})]}),Object(I.jsxs)("div",{className:"projects",children:[Object(I.jsx)("h3",{children:"My other projects:"}),Object(I.jsxs)("ul",{children:[Object(I.jsxs)("li",{children:[Object(I.jsx)("a",{href:"https://ducnt444.github.io/halo",target:"_blank",rel:"noreferrer",children:"HALO"}),": demo camera shop website (static content, practicing Pug, CSS, JS)"]}),Object(I.jsxs)("li",{children:[Object(I.jsx)("a",{href:"https://ducnt444.github.io/planetary",target:"_blank",rel:"noreferrer",children:"PLANETARY"}),": demo space travel website (practicing Vue.js, Vuex)"]}),Object(I.jsxs)("li",{children:[Object(I.jsx)("a",{href:"https://changeable-list.herokuapp.com/",target:"_blank",rel:"noreferrer",children:"Changeable list"}),": demo list manager (practicing DOM manipulation, Jquery, basic uses of REST API)"]})]})]})]})})]})},$=a(69),ee=function(){return Object(I.jsx)("nav",{children:Object(I.jsxs)("ul",{className:"container1140",children:[Object(I.jsx)("li",{children:Object(I.jsxs)(V.c,{to:"/",exact:!0,className:"flex-center",activeClassName:"active-tab",children:[Object(I.jsx)("span",{className:"desktop",children:"Home"})," ",Object(I.jsx)(l.b,{})]})}),Object(I.jsx)("li",{children:Object(I.jsxs)(V.c,{to:"/add-task",className:"flex-center",activeClassName:"active-tab",children:[Object(I.jsxs)("span",{className:"desktop",children:["Add ",Object(I.jsx)($.a,{})]}),Object(I.jsx)($.a,{})]})}),Object(I.jsx)("li",{children:Object(I.jsxs)(V.c,{to:"/profile",className:"flex-center",activeClassName:"active-tab",children:[Object(I.jsx)("span",{className:"desktop",children:"profile"})," ",Object(I.jsx)(l.c,{})]})})]})})},te=a(88),ae=a.n(te),ne=a(116),se=function(){Object(r.c)((function(e){return e.appState.apiUrl}));var e=Object(r.c)((function(e){return e.appState.currentUser})),t=Object(b.f)(),a=Object(r.b)();return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("header",{className:"container1140",children:[Object(I.jsx)("h1",{children:"Profile"}),Object(I.jsxs)("div",{className:"userInfo",children:[Object(I.jsx)("div",{className:"userAvatar flex-center",children:Object(I.jsx)(l.c,{})}),Object(I.jsx)("h3",{className:"userName",children:e.username})]})]}),Object(I.jsx)("main",{className:"flex-center",children:Object(I.jsx)("div",{className:"container1140 flex-center",children:Object(I.jsx)("button",{className:"logoutBtn",onClick:function(){a((a(f(!0)),function(){var e=Object(ne.a)(ae.a.mark((function e(n){var s,c;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q({id:"",token:""});case 2:s=e.sent,c=s.data,n(p(c)),t.push("/login"),a(f(!1));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:"Logout"})})})]})};var ce=function(){var e=function(e,t){return Z.c.success(e,t)},t=function(e){return Z.c.error(e)},a=Object(b.f)(),s=Object(r.b)(),c=Object(r.c)((function(e){return e.loadingState.isLoading})),i=Object(r.c)((function(e){return e.appState.currentUser})),l=function(){return function(e){return A.a.get(w+"/currentUser").then((function(t){var n=t.data.token;if(""!==n){var s={Authorization:"Bearer ".concat(n)};(function(e,t){return A.a.get(w+"/users/"+e,{headers:t})})(t.data.id,s).then((function(t){e(p(Object(o.a)(Object(o.a)({},t.data),{},{token:n})))})).catch((function(e){"Unauthorized"===e.response.data&&a.push("/login")})).finally((function(){e(f(!1))}))}else a.push("/login")})).finally((function(){e(f(!1))}))}};return Object(n.useEffect)((function(){s(l())}),[]),Object(I.jsxs)("div",{className:"App",children:[Object(I.jsx)(J,{isLoading:c}),Object(I.jsx)(Z.b,{transition:Z.a,className:"customizedToast",position:"bottom-right",autoClose:2e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!1,rtl:!1,pauseOnFocusLoss:!1,draggable:!1,pauseOnHover:!1}),Object(I.jsx)(B,{currentUser:i,toastSuccess:e}),Object(I.jsxs)(b.c,{children:[Object(I.jsx)(b.a,{path:"/login",children:Object(I.jsx)(X,{toastSuccess:e,toastError:t})}),Object(I.jsx)(b.a,{path:"/profile",children:Object(I.jsx)(se,{})}),Object(I.jsx)(b.a,{path:"/add-task",children:Object(I.jsx)(W,{toastSuccess:e,toastError:t})}),Object(I.jsx)(b.a,{path:"/edit-task/:id",children:Object(I.jsx)(q,{currentUser:i,toastSuccess:e,toastError:t})}),Object(I.jsx)(b.a,{path:"/",exact:!0,children:Object(I.jsx)(F,{toastSuccess:e,toastWarning:function(e){return Z.c.warn(e)}})})]}),Object(I.jsx)(ee,{})]})},ie=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,208)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),s(e),c(e),i(e)}))},re=a(21),oe=Object(m.b)({taskList:[],deleteID:null},(function(e){e.addCase(h,(function(e,t){e.taskList=t.payload.taskList})).addCase("ADD_TASK",(function(e,t){e.taskList.push(t.payload.newTask)})).addCase(S,(function(e,t){e.taskList=e.taskList.map((function(e){return e.id===t.payload.editedTask.id?Object(o.a)(Object(o.a)({},e),{},{taskName:t.payload.editedTask.taskName,taskDate:t.payload.editedTask.taskDate,isDone:t.payload.editedTask.isDone}):e}))})).addCase(C,(function(e,t){e.taskList=e.taskList.map((function(e){return e.id===t.payload.completeTask.id?Object(o.a)(Object(o.a)({},e),{},{isDone:t.payload.completeTask.isDone}):e}))})).addCase(D,(function(e,t){"attemptDelete"===t.payload.mode?e.deleteID=t.payload.deleteId:"confirmDelete"===t.payload.mode&&(e.taskList=e.taskList.filter((function(t){return t.id!==e.deleteID})))})).addCase(T,(function(e,t){e.taskList=t.payload.taskList}))})),le=Object(m.b)({modalContent:"",modalId:null,isVisible:!1,isLoading:!1},(function(e){e.addCase(g,(function(e,t){e.modalId=t.payload.id,e.modalContent=t.payload.content})).addCase(N,(function(e,t){e.isVisible=t.payload.isVisible})).addCase(v,(function(e,t){e.isLoading=t.payload.isLoading}))})),de=Object(m.b)({apiUrl:"https://rest-api-v2.herokuapp.com",currentUser:{id:null,username:"",token:"",tasks:[]}},(function(e){e.addCase(p,(function(e,t){e.currentUser=t.payload.userInput})).addCase(k,(function(e){e.currentUser={id:null,username:"",token:"",tasks:[]}})).addCase(y,(function(e,t){e.currentUser.tasks.push(t.payload.newTask)})).addCase(S,(function(e,t){e.currentUser.tasks=e.currentUser.tasks.map((function(e){return e.id==t.payload.id?t.payload.editedTask:e}))})).addCase(D,(function(e,t){e.currentUser.tasks=t.payload}))})),je=Object(m.b)({displayNav:!0},(function(e){e.addCase(x,(function(e,t){e.displayNav=t.payload}))})),ue=Object(re.combineReducers)({appState:de,loadingState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(o.a)(Object(o.a)({},e),{},{isLoading:t.payload.status});default:return e}},taskState:oe,modalState:le,navState:je}),be=a(117),Oe=[a(52).a],he=Object(re.createStore)(ue,Object(be.composeWithDevTools)(re.applyMiddleware.apply(void 0,Oe)));i.a.render(Object(I.jsx)(s.a.StrictMode,{children:Object(I.jsx)(V.a,{children:Object(I.jsx)(r.a,{store:he,children:Object(I.jsx)(ce,{})})})}),document.getElementById("root")),ie()}},[[196,1,2]]]);
//# sourceMappingURL=main.b9a0fb90.chunk.js.map