(this["webpackJsonpreact-task-manager"]=this["webpackJsonpreact-task-manager"]||[]).push([[0],{131:function(e,t,n){},132:function(e,t,n){},196:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(13),i=n.n(c),r=n(11),o=(n(131),n(16)),d=(n(132),n(42)),l=n(103),u=n(102),j=n(101),b=n(12),O="TOGGLE_LOADING",h="GET_TASK_LIST",m=n(17),f=function(e){return{type:O,payload:{status:e}}},p=Object(m.a)("UPDATE_CURRENT",(function(e){return{payload:{userInput:e}}})),x=Object(m.a)("LOGOUT"),k=Object(m.a)("MODAL_CONTENT",(function(e,t){return{payload:{id:e,content:t}}})),g=Object(m.a)("MODAL_VISIBLE",(function(e){return{payload:{isVisible:e}}})),v=Object(m.a)("MODAL_LOADING",(function(e){return{payload:{isLoading:e}}})),N=Object(m.a)("ADD_TASK",(function(e){return{payload:{newTask:e}}})),y=Object(m.a)("EDIT_TASK",(function(e,t){return{payload:{id:e,editedTask:t}}})),S=Object(m.a)("COMPLETE_TASK",(function(e){return{payload:{completeTask:e}}})),C=Object(m.a)("DELETE _TASK",(function(e){return{payload:e}})),T=Object(m.a)("GET _TASKS",(function(e){return{payload:e}})),D=n(35),L=n.n(D),A="https://rest-api-v2.herokuapp.com",w=function(e,t,n){return L.a.patch(A+"/users/"+e,{tasks:t},n)},E=n(2),I=function(e){var t=e.task,n=e.toastSuccess,a=e.toastWarning,s=Object(b.f)(),c=Object(r.b)(),i=Object(r.c)((function(e){return e.appState.currentUser})),O=new Intl.DateTimeFormat([],{timeZone:"Asia/Ho_Chi_Minh",year:"numeric",month:"2-digit",day:"2-digit"}),h=t.taskDate,m=O.format(new Date(h));return Object(E.jsxs)("div",{className:"taskItem",children:[Object(E.jsxs)("div",{className:"taskContent",children:[Object(E.jsx)("h3",{className:"taskName",children:t.taskName}),Object(E.jsx)("h4",{className:"taskDate",children:m})]}),Object(E.jsx)("button",{className:"doneBtn",onClick:function(){return c((function(e){e(f(!0));var s=Object(o.a)(Object(o.a)({},t),{},{isDone:!t.isDone}),c=i.tasks.map((function(e){return e.id==t.id?s:e})),r={Authorization:"Bearer ".concat(i.token)};w(i.id,c,{headers:r}).then((function(){e(y(t.id,s)),e(f(!1)),t.isDone?a("Task is incomplete"):n("Task is completed")}))}))},children:t.isDone?Object(E.jsx)(j.a,{}):Object(E.jsx)(u.a,{})}),Object(E.jsx)("button",{className:"editBtn",onClick:function(){return s.push("/edit-task/".concat(t.id))},children:Object(E.jsx)(d.a,{})}),Object(E.jsx)("button",{className:"deleteBtn",onClick:function(){c(k(t.id,"Do you want to delete this task")),c(g(!0))},children:Object(E.jsx)(l.a,{})})]})},U=n(53),F=n(18),B=function(e){var t=e.toastSuccess,n=e.toastWarning,a=Object(r.c)((function(e){return e.appState.currentUser.tasks})),s=a.filter((function(e){return!0===e.isDone})),c=a.filter((function(e){return!1===e.isDone}));return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("header",{children:[Object(E.jsx)("h1",{children:"Task Manager by React"}),Object(E.jsxs)("div",{className:"header-content",children:[Object(E.jsxs)("div",{className:"statistics-area",children:[Object(E.jsxs)("div",{className:"statistics",onClick:function(){return document.getElementById("doneTasks").scrollIntoView({behavior:"smooth"})},children:[Object(E.jsx)("div",{className:"header-item",children:s.length}),Object(E.jsx)("span",{className:"statistics-text",children:"Completed"})]}),Object(E.jsxs)("div",{className:"statistics",onClick:function(){return document.getElementById("todoTasks").scrollIntoView({behavior:"smooth"})},children:[Object(E.jsx)("div",{className:"header-item",children:c.length}),Object(E.jsx)("span",{className:"statistics-text",children:"Ongoing"})]})]}),Object(E.jsx)("button",{className:"header-item header-btn",children:Object(E.jsxs)(F.b,{to:"/add-task",children:[Object(E.jsx)("span",{children:"Add"})," ",Object(E.jsx)(U.a,{})]})})]})]}),Object(E.jsx)("main",{children:Object(E.jsxs)("div",{className:"home",children:[Object(E.jsxs)("div",{id:"todoTasks",children:[Object(E.jsx)("h2",{children:"Ongoing tasks: "}),c.length>0?c.map((function(e){return Object(E.jsx)(I,{task:e,toastSuccess:t,toastWarning:n},e.id)})):Object(E.jsx)("span",{className:"noTasks",children:"No tasks yet"})]}),Object(E.jsxs)("div",{id:"doneTasks",children:[Object(E.jsx)("h2",{children:"Completed tasks: "}),s.length>0?s.map((function(e){return Object(E.jsx)(I,{task:e,toastSuccess:t,toastWarning:n},e.id)})):Object(E.jsx)("span",{className:"noTasks",children:"No tasks yet"})]})]})})]})},_=n(206),M=function(e){var t=e.currentUser,n=e.toastSuccess,a=Object(r.b)(),s=Object(r.c)((function(e){return e.modalState.modalId})),c=Object(r.c)((function(e){return e.modalState.modalContent})),i=Object(r.c)((function(e){return e.modalState.isLoading})),o=Object(r.c)((function(e){return e.modalState.isVisible}));return Object(E.jsx)(_.a,{visible:o,confirmLoading:i,onOk:function(){a((function(e){e(v(!0));var a=t.tasks.filter((function(e){return e.id!==s})),c={Authorization:"Bearer ".concat(t.token)};w(t.id,a||[],{headers:c}).then((function(t){e(C(t.data.tasks)),e(v(!1)),e(g(!1)),n("Task is deleted successfully")}))}))},onCancel:function(){a(g(!1))},children:Object(E.jsx)("p",{className:"modalContent",children:c})})},P=n(119),z=n(32),V=n(65),G=n.n(V),K=(n(99),n(155)),W=n(207),R=function(e){var t=e.toastSuccess,n=e.toastError,s=Object(a.useState)(""),c=Object(z.a)(s,2),i=c[0],d=c[1],l=Object(a.useState)(null),u=Object(z.a)(l,2),j=u[0],b=u[1],O=Object(r.b)(),h=Object(r.c)((function(e){return e.appState.currentUser}));return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("header",{children:[Object(E.jsx)("h1",{children:"Add task"}),Object(E.jsx)("div",{className:"header-content",children:Object(E.jsx)("button",{className:"header-item header-btn",children:Object(E.jsx)(F.b,{to:"/",children:Object(E.jsx)("span",{children:"Back"})})})})]}),Object(E.jsxs)("main",{children:[Object(E.jsxs)("div",{className:"form-item",children:[Object(E.jsx)("label",{htmlFor:"taskName",children:"Add task:"}),Object(E.jsx)("input",{type:"text",id:"taskName",value:i,onChange:function(e){d(e.target.value)}})]}),Object(E.jsxs)("div",{className:"form-item",children:[Object(E.jsx)("label",{htmlFor:"taskDate",children:"Task date:"}),Object(E.jsx)(G.a,{dateFormat:"dd/MM/yyyy",selected:j,onChange:function(e){b(e)},minDate:Object(K.default)(new Date,0)})]}),Object(E.jsx)("button",{onClick:function(){""!==i&&null!==j?O((function(e){e(f(!0));var n={id:Object(W.a)(),taskName:i,taskDate:j,isDone:!1},a=[].concat(Object(P.a)(h.tasks),[n]),s={Authorization:"Bearer ".concat(h.token)};w(h.id,a,{headers:s}).then((function(){e(N(Object(o.a)(Object(o.a)({},n),{},{taskDate:new Date(j).toISOString()}))),e(f(!1)),d(""),b(null),t("Task added successfully"),console.log(h)}))})):n("Please fill in both fields")},className:"confirm-btn blue-text-btn btn",children:"Confirm"})]})]})},H=n.p+"static/media/react-logo-min.90175bd1.png",J=function(e){var t=e.isLoading;return Object(E.jsx)("div",{className:"loading ".concat(t?"show":""),children:Object(E.jsx)("img",{src:H,alt:"loading"})})},Z=n(192),q=function(e){var t=e.currentUser,n=e.toastSuccess,s=e.toastError,c=Object(r.b)(),i=Object(b.g)().id,o=Object(a.useState)(""),d=Object(z.a)(o,2),l=d[0],u=d[1],j=Object(a.useState)(null),O=Object(z.a)(j,2),h=O[0],m=O[1];Object(a.useEffect)((function(){var e=t.tasks.find((function(e){return e.id===+i}));e&&(u(e.taskName),m(Object(Z.default)(e.taskDate)))}),[t]);return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("header",{children:[Object(E.jsx)("h1",{children:"Edit task"}),Object(E.jsx)("div",{className:"header-content",children:Object(E.jsx)("button",{className:"header-item header-btn",children:Object(E.jsx)(F.b,{to:"/",children:Object(E.jsx)("span",{children:"Back"})})})})]}),Object(E.jsxs)("main",{children:[Object(E.jsxs)("div",{className:"form-item",children:[Object(E.jsx)("label",{htmlFor:"taskName",children:"Edit task:"}),Object(E.jsx)("input",{type:"text",id:"taskName",value:l,onChange:function(e){u(e.target.value)}})]}),Object(E.jsxs)("div",{className:"form-item",children:[Object(E.jsx)("label",{htmlFor:"taskDate",children:"Task date:"}),Object(E.jsx)(G.a,{dateFormat:"dd/MM/yyyy",selected:h,onChange:function(e){m(e)},minDate:Object(K.default)(new Date,0)})]}),Object(E.jsx)("button",{onClick:function(){""!==l&&null!==h?c((function(e){e(f(!0));var a={id:+i,taskName:l,taskDate:new Date(h).toISOString(),isDone:t.tasks[i].isDone};console.log(i);var s=t.tasks.map((function(e){return e.id==i?a:e}));console.log(s);var c={Authorization:"Bearer ".concat(t.token)};w(t.id,s,{headers:c}).then((function(){e(y(i,a)),e(f(!1)),n("Task edited successfully"),console.log(t)}))})):s("Please fill in both fields")},className:"confirm-btn blue-text-btn btn",children:"Confirm"})]})]})},Q=n(48),X=(n(194),function(e){return L.a.put(A+"/currentUser",e)}),Y=function(e){var t=e.toastSuccess,n=e.toastError,s=Object(b.f)(),c=Object(r.b)(),i=Object(r.c)((function(e){return e.appState.apiUrl})),o=Object(a.useState)("Login"),d=Object(z.a)(o,2),l=d[0],u=d[1],j=Object(a.useState)(""),O=Object(z.a)(j,2),h=O[0],m=O[1],x=Object(a.useState)(""),k=Object(z.a)(x,2),g=k[0],v=k[1],N=Object(a.useState)(!1),y=Object(z.a)(N,2),S=y[0],C=y[1],T=function(e){c(f(!0));var a={username:h,password:g};return function(r){return function(e,t,n){return L.a.post(e+t,n)}(i,e,a).then((function(e){r(p(e.data)),X({id:e.data.id,token:e.data.token}),C(!0),t("Welcome, ".concat(e.data.username,". Redirecting..."),{onClose:function(){return s.push("/")}})})).catch((function(e){n(e.response.data.message)})).finally((function(){c(f(!1))}))}},D=function(e){S?console.log("blocked"):c(T(e))};return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("header",{children:[Object(E.jsx)("h1",{children:"Task Manager by React"}),Object(E.jsx)("h2",{children:"Login"===l?"Log in":"Sign up"})]}),Object(E.jsxs)("main",{className:"login-page",children:[Object(E.jsxs)("div",{className:"form-item",children:[Object(E.jsx)("label",{htmlFor:"username",children:"Username:"}),Object(E.jsx)("input",{type:"text",id:"username",placeholder:"demo: user",onChange:function(e){m(e.target.value)}})]}),Object(E.jsxs)("div",{className:"form-item",children:[Object(E.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(E.jsx)("input",{type:"text",id:"password",placeholder:"demo: 123",onChange:function(e){v(e.target.value)}})]}),Object(E.jsx)("button",{onClick:function(){D("Login"===l?"/login":"/register")},className:"confirm-btn blue-text-btn btn",children:"Login"===l?"Log in":"Sign up"}),Object(E.jsxs)("p",{className:"sign-up-text",children:["Login"===l?"Don't have an account yet?":"Have an account?",Object(E.jsx)("span",{className:"sign-up",onClick:function(){u("Login"===l?"Signup":"Login")},children:"Login"===l?" Sign up here!":" Log in now!"})]})]})]})},$=function(){return Object(E.jsx)("nav",{children:Object(E.jsxs)("ul",{children:[Object(E.jsx)("li",{children:Object(E.jsxs)(F.c,{to:"/",exact:!0,className:"flex-center",activeClassName:"active-tab",children:[Object(E.jsx)("span",{className:"desktop",children:"Home"})," ",Object(E.jsx)(d.b,{})]})}),Object(E.jsx)("li",{children:Object(E.jsxs)(F.c,{to:"/add-task",className:"flex-center",activeClassName:"active-tab",children:[Object(E.jsxs)("span",{className:"desktop",children:["Add ",Object(E.jsx)(U.a,{})]}),Object(E.jsx)(U.a,{})]})}),Object(E.jsx)("li",{children:Object(E.jsxs)(F.c,{to:"/profile",className:"flex-center",activeClassName:"active-tab",children:[Object(E.jsx)("span",{className:"desktop",children:"profile"})," ",Object(E.jsx)(d.c,{})]})})]})})},ee=n(88),te=n.n(ee),ne=n(116),ae=function(){var e=Object(r.c)((function(e){return e.appState.apiUrl})),t=Object(r.c)((function(e){return e.appState.currentUser})),n=Object(b.f)(),a=Object(r.b)();return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("header",{children:[Object(E.jsx)("h1",{children:"Profile"}),Object(E.jsxs)("div",{className:"userInfo",children:[Object(E.jsx)("div",{className:"userAvatar flex-center",children:Object(E.jsx)(d.c,{})}),Object(E.jsx)("h3",{className:"userName",children:t.username})]})]}),Object(E.jsxs)("main",{children:[Object(E.jsx)("button",{onClick:function(){a((a(f(!0)),function(){var e=Object(ne.a)(te.a.mark((function e(t){var s,c;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X({id:"",token:""});case 2:s=e.sent,c=s.data,t(p(c)),n.push("/login"),a(f(!1));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:"Logout"}),Object(E.jsx)("button",{onClick:function(){var n={Authorization:"Bearer ".concat(t.token)};L.a.get(e+"/users/",{headers:n}).then((function(e){return console.log(e)}))},children:"Test"})]})]})};var se=function(){var e=function(e,t){return Q.c.success(e,t)},t=function(e){return Q.c.error(e)},n=Object(b.f)(),s=Object(r.b)(),c=Object(r.c)((function(e){return e.loadingState.isLoading})),i=Object(r.c)((function(e){return e.appState.currentUser})),d=function(){return function(e){return L.a.get(A+"/currentUser").then((function(t){var a=t.data.token;if(""!==a){var s={Authorization:"Bearer ".concat(a)};(function(e,t){return L.a.get(A+"/users/"+e,{headers:t})})(t.data.id,s).then((function(t){e(p(Object(o.a)(Object(o.a)({},t.data),{},{token:a})))})).catch((function(e){"Unauthorized"===e.response.data&&n.push("/login")})).finally((function(){e(f(!1))}))}else n.push("/login")})).finally((function(){e(f(!1))}))}};return Object(a.useEffect)((function(){s(d())}),[]),Object(E.jsxs)("div",{className:"App",children:[Object(E.jsx)($,{}),Object(E.jsx)(J,{isLoading:c}),Object(E.jsx)(Q.b,{transition:Q.a,className:"customizedToast",position:"bottom-right",autoClose:2e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!1,rtl:!1,pauseOnFocusLoss:!1,draggable:!1,pauseOnHover:!1}),Object(E.jsx)(M,{currentUser:i,toastSuccess:e}),Object(E.jsxs)(b.c,{children:[Object(E.jsx)(b.a,{path:"/login",children:Object(E.jsx)(Y,{toastSuccess:e,toastError:t})}),Object(E.jsx)(b.a,{path:"/profile",children:Object(E.jsx)(ae,{})}),Object(E.jsx)(b.a,{path:"/add-task",children:Object(E.jsx)(R,{toastSuccess:e,toastError:t})}),Object(E.jsx)(b.a,{path:"/edit-task/:id",children:Object(E.jsx)(q,{currentUser:i,toastSuccess:e,toastError:t})}),Object(E.jsx)(b.a,{path:"/",exact:!0,children:Object(E.jsx)(B,{toastSuccess:e,toastWarning:function(e){return Q.c.warn(e)}})})]})]})},ce=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,208)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),s(e),c(e),i(e)}))},ie=n(22),re=Object(m.b)({taskList:[],deleteID:null},(function(e){e.addCase(h,(function(e,t){e.taskList=t.payload.taskList})).addCase("ADD_TASK",(function(e,t){e.taskList.push(t.payload.newTask)})).addCase(y,(function(e,t){e.taskList=e.taskList.map((function(e){return e.id===t.payload.editedTask.id?Object(o.a)(Object(o.a)({},e),{},{taskName:t.payload.editedTask.taskName,taskDate:t.payload.editedTask.taskDate,isDone:t.payload.editedTask.isDone}):e}))})).addCase(S,(function(e,t){e.taskList=e.taskList.map((function(e){return e.id===t.payload.completeTask.id?Object(o.a)(Object(o.a)({},e),{},{isDone:t.payload.completeTask.isDone}):e}))})).addCase(C,(function(e,t){"attemptDelete"===t.payload.mode?e.deleteID=t.payload.deleteId:"confirmDelete"===t.payload.mode&&(e.taskList=e.taskList.filter((function(t){return t.id!==e.deleteID})))})).addCase(T,(function(e,t){e.taskList=t.payload.taskList}))})),oe=Object(m.b)({modalContent:"",modalId:null,isVisible:!1,isLoading:!1},(function(e){e.addCase(k,(function(e,t){e.modalId=t.payload.id,e.modalContent=t.payload.content})).addCase(g,(function(e,t){e.isVisible=t.payload.isVisible})).addCase(v,(function(e,t){e.isLoading=t.payload.isLoading}))})),de=Object(m.b)({apiUrl:"https://rest-api-v2.herokuapp.com",currentUser:{id:null,username:"",token:"",tasks:[]}},(function(e){e.addCase(p,(function(e,t){e.currentUser=t.payload.userInput})).addCase(x,(function(e){e.currentUser={id:null,username:"",token:"",tasks:[]}})).addCase(N,(function(e,t){e.currentUser.tasks.push(t.payload.newTask)})).addCase(y,(function(e,t){e.currentUser.tasks=e.currentUser.tasks.map((function(e){return e.id==t.payload.id?t.payload.editedTask:e}))})).addCase(C,(function(e,t){e.currentUser.tasks=t.payload}))})),le=Object(ie.combineReducers)({appState:de,loadingState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(o.a)(Object(o.a)({},e),{},{isLoading:t.payload.status});default:return e}},taskState:re,modalState:oe}),ue=n(117),je=[n(52).a],be=Object(ie.createStore)(le,Object(ue.composeWithDevTools)(ie.applyMiddleware.apply(void 0,je)));i.a.render(Object(E.jsx)(s.a.StrictMode,{children:Object(E.jsx)(F.a,{children:Object(E.jsx)(r.a,{store:be,children:Object(E.jsx)(se,{})})})}),document.getElementById("root")),ce()}},[[196,1,2]]]);
//# sourceMappingURL=main.3a5a9a6a.chunk.js.map